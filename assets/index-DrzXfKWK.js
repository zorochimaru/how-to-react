import{a as z,r as i,j as c,t as H,d as I,u as O,b as P,c as $,s as q}from"./index-CVLhJmXK.js";var j={exports:{}},N={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U;function B(){if(U)return N;U=1;var e=z();function o(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var t=typeof Object.is=="function"?Object.is:o,n=e.useSyncExternalStore,r=e.useRef,u=e.useEffect,d=e.useMemo,s=e.useDebugValue;return N.useSyncExternalStoreWithSelector=function(a,l,v,b,x){var g=r(null);if(g.current===null){var f={hasValue:!1,value:null};g.current=f}else f=g.current;g=d(function(){function k(p){if(!S){if(S=!0,w=p,p=b(p),x!==void 0&&f.hasValue){var m=f.value;if(x(m,p))return C=m}return C=p}if(m=C,t(w,p))return m;var T=b(p);return x!==void 0&&x(m,T)?(w=p,m):(w=p,C=T)}var S=!1,w,C,V=v===void 0?null:v;return[function(){return k(l())},V===null?void 0:function(){return k(V())}]},[l,v,b,x]);var y=n(a,g[0],g[1]);return u(function(){f.hasValue=!0,f.value=y},[y]),s(y),y},N}var W;function G(){return W||(W=1,j.exports=B()),j.exports}var F=G();function J(e){e()}function K(){let e=null,o=null;return{clear(){e=null,o=null},notify(){J(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(t){let n=!0;const r=o={callback:t,next:null,prev:o};return r.prev?r.prev.next=r:e=r,function(){!n||e===null||(n=!1,r.next?r.next.prev=r.prev:o=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var L={notify(){},get:()=>[]};function Q(e,o){let t,n=L,r=0,u=!1;function d(y){v();const k=n.subscribe(y);let S=!1;return()=>{S||(S=!0,k(),b())}}function s(){n.notify()}function a(){f.onStateChange&&f.onStateChange()}function l(){return u}function v(){r++,t||(t=e.subscribe(a),n=K())}function b(){r--,t&&r===0&&(t(),t=void 0,n.clear(),n=L)}function x(){u||(u=!0,v())}function g(){u&&(u=!1,b())}const f={addNestedSub:d,notifyNestedSubs:s,handleChangeWrapper:a,isSubscribed:l,trySubscribe:x,tryUnsubscribe:g,getListeners:()=>n};return f}var X=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Y=X(),Z=()=>typeof navigator<"u"&&navigator.product==="ReactNative",ee=Z(),te=()=>Y||ee?i.useLayoutEffect:i.useEffect,re=te(),R=Symbol.for("react-redux-context"),E=typeof globalThis<"u"?globalThis:{};function ne(){if(!i.createContext)return{};const e=E[R]??(E[R]=new Map);let o=e.get(i.createContext);return o||(o=i.createContext(null),e.set(i.createContext,o)),o}var h=ne();function oe(e){const{children:o,context:t,serverState:n,store:r}=e,u=i.useMemo(()=>{const a=Q(r);return{store:r,subscription:a,getServerState:n?()=>n:void 0}},[r,n]),d=i.useMemo(()=>r.getState(),[r]);re(()=>{const{subscription:a}=u;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),d!==r.getState()&&a.notifyNestedSubs(),()=>{a.tryUnsubscribe(),a.onStateChange=void 0}},[u,d]);const s=t||h;return i.createElement(s.Provider,{value:u},o)}var se=oe;function M(e=h){return function(){return i.useContext(e)}}var A=M();function _(e=h){const o=e===h?A:M(e),t=()=>{const{store:n}=o();return n};return Object.assign(t,{withTypes:()=>t}),t}var ae=_();function ue(e=h){const o=e===h?ae:_(e),t=()=>o().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var ce=ue(),ie=(e,o)=>e===o;function le(e=h){const o=e===h?A:M(e),t=(n,r={})=>{const{equalityFn:u=ie}=typeof r=="function"?{equalityFn:r}:r,d=o(),{store:s,subscription:a,getServerState:l}=d;i.useRef(!0);const v=i.useCallback({[n.name](x){return n(x)}}[n.name],[n]),b=F.useSyncExternalStoreWithSelector(a.addNestedSub,s.getState,l||s.getState,v,u);return i.useDebugValue(b),b};return Object.assign(t,{withTypes:()=>t}),t}var de=le();const fe=()=>ce(),D=de,be=()=>{const[e,o]=i.useState(""),t=fe(),n=D(s=>s.todos.todos),r=D(s=>s.todos.past),u=D(s=>s.todos.future),d=()=>{e.trim()!==""&&(t($(e.trim())),o(""))};return c.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white dark:bg-gray-800 rounded shadow space-y-4",children:[c.jsxs("div",{className:"flex items-end gap-10",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Todo Manager"}),c.jsxs("a",{href:"https://github.com/zorochimaru/how-to-react/blob/main/src/modules/redux",target:"_blank",rel:"noopener noreferrer",children:["Source code ","</>"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{className:"flex-1 border rounded px-2 py-1 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"New todo",value:e,onChange:s=>o(s.target.value),onKeyDown:s=>s.key==="Enter"&&d()}),c.jsx("button",{onClick:d,className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded dark:bg-blue-400 dark:hover:bg-blue-500",children:"Add"})]}),c.jsx("ul",{className:"space-y-2",children:n.map(s=>c.jsxs("li",{className:"flex justify-between items-center border-b py-1 border-gray-300 dark:border-gray-600",children:[c.jsx("span",{className:`cursor-pointer ${s.completed?"line-through text-gray-400 dark:text-gray-500":"text-gray-900 dark:text-gray-100"}`,onClick:()=>t(H(s.id)),children:s.text}),c.jsx("button",{onClick:()=>t(I(s.id)),className:"text-sm text-red-500 hover:underline dark:text-red-400 dark:hover:text-red-300",children:"Delete"})]},s.id))}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>t(O()),disabled:r.length===0,className:`px-3 py-1 rounded ${r.length===0?"bg-gray-200 text-gray-400 dark:bg-gray-700 dark:text-gray-500":"bg-yellow-400 hover:bg-yellow-500 text-white dark:bg-yellow-300 dark:hover:bg-yellow-400"}`,children:"Undo"}),c.jsx("button",{onClick:()=>t(P()),disabled:u.length===0,className:`px-3 py-1 rounded ${u.length===0?"bg-gray-200 text-gray-400 dark:bg-gray-700 dark:text-gray-500":"bg-green-400 hover:bg-green-500 text-white dark:bg-green-300 dark:hover:bg-green-400"}`,children:"Redo"})]})]})},ge=()=>c.jsx(se,{store:q,children:c.jsx(be,{})});export{ge as ReduxExample};
